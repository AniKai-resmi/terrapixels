<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TerraPixels</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
}

#map {
  height: 100vh;
  width: 100vw;
}

#colorPicker {
  position: absolute;
  top: 15px;
  left: 60px;
  z-index: 1000;
}
</style>
</head>

<body>

<input type="color" id="colorPicker" value="#ff0000">
<div id="map"></div>

<script>

var map = L.map('map', {
  worldCopyJump: false,
  maxBounds: [[-90, -180], [90, 180]]
}).setView([20, 0], 2);

L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors',
  noWrap: true
}).addTo(map);

var selectedColor = document.getElementById("colorPicker").value;
document.getElementById("colorPicker").addEventListener("input", function() {
  selectedColor = this.value;
});

var pixelSize = 20; // ger√ßek kare boyutu (ekran pixel)

map.on('click', function(e) {

  var point = map.latLngToContainerPoint(e.latlng);

  var snappedX = Math.floor(point.x / pixelSize) * pixelSize;
  var snappedY = Math.floor(point.y / pixelSize) * pixelSize;

  var topLeft = map.containerPointToLatLng([snappedX, snappedY]);
  var bottomRight = map.containerPointToLatLng([snappedX + pixelSize, snappedY + pixelSize]);

  L.rectangle([topLeft, bottomRight], {
    color: selectedColor,
    fillColor: selectedColor,
    fillOpacity: 1,
    weight: 0
  }).addTo(map);

});

</script>

</body>
</html>

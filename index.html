<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TerraPixels</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
}

#map {
  height: 100vh;
  width: 100vw;
  position: relative;
}

/* Canvas Ã¼stte */
#pixelCanvas {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 500;
}

/* ðŸŽ¨ Renk Paleti */
#palette {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
  background: rgba(0,0,0,0.9);
  padding: 10px;
  border-radius: 12px;
  display: grid;
  grid-template-columns: repeat(16, 20px);
  gap: 5px;
}

.color {
  width: 20px;
  height: 20px;
  border-radius: 3px;
  cursor: pointer;
  border: 1px solid white;
}
</style>
</head>

<body>

<div id="map"></div>
<canvas id="pixelCanvas"></canvas>
<div id="palette"></div>

<script>

/* ðŸŒ Harita */
var map = L.map('map').setView([20, 0], 3);

L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

/* ðŸŽ¨ Canvas Ayar */
var canvas = document.getElementById("pixelCanvas");
var ctx = canvas.getContext("2d");

function resizeCanvas() {
  canvas.width = map.getSize().x;
  canvas.height = map.getSize().y;
}
resizeCanvas();

map.on("resize", resizeCanvas);
map.on("move", resizeCanvas);

/* ðŸ”¥ KÃ¼Ã§Ã¼k Pixel */
var pixelSize = 3; // daha kÃ¼Ã§Ã¼k istersen 2 yap

var selectedColor = "#ff0000";

/* ðŸŽ¨ 32 Renk */
var colors = [
"#000000","#3c3c3c","#787878","#d2d2d2","#ffffff",
"#600018","#ed1c24","#ff7f27","#fff200",
"#00a2e8","#3f48cc","#a349a4",
"#22b14c","#b5e61d",
"#ffaec9","#ffc90e",
"#7f0000","#b97a57","#c8bfe7",
"#7092be","#99d9ea","#c3c3c3",
"#880015","#ff0000","#ff6a00",
"#ffd800","#00ff00","#00ffff",
"#0000ff","#ff00ff",
"#8b4513","#2e8b57"
];

var paletteDiv = document.getElementById("palette");

colors.forEach(color => {
  var btn = document.createElement("div");
  btn.className = "color";
  btn.style.background = color;

  btn.addEventListener("click", function() {
    selectedColor = color;
  });

  paletteDiv.appendChild(btn);
});

/* ðŸŸ© Pixel Koyma */
map.getContainer().addEventListener("click", function(e) {

  var rect = canvas.getBoundingClientRect();
  var x = e.clientX - rect.left;
  var y = e.clientY - rect.top;

  var snappedX = Math.floor(x / pixelSize) * pixelSize;
  var snappedY = Math.floor(y / pixelSize) * pixelSize;

  ctx.fillStyle = selectedColor;
  ctx.fillRect(snappedX, snappedY, pixelSize, pixelSize);

});

</script>

</body>
</html>

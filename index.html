<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TerraPixels</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
}

#map {
  height: 100vh;
  width: 100vw;
}

/* ðŸŽ¨ Alt Orta Renk Paleti */
#palette {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
  background: rgba(0,0,0,0.7);
  padding: 10px 15px;
  border-radius: 12px;
  display: flex;
  gap: 10px;
}

.color {
  width: 30px;
  height: 30px;
  border-radius: 6px;
  cursor: pointer;
  border: 2px solid white;
}
</style>
</head>

<body>

<div id="map"></div>

<div id="palette">
  <div class="color" style="background:#ff0000" data-color="#ff0000"></div>
  <div class="color" style="background:#00ff00" data-color="#00ff00"></div>
  <div class="color" style="background:#0000ff" data-color="#0000ff"></div>
  <div class="color" style="background:#ffff00" data-color="#ffff00"></div>
  <div class="color" style="background:#000000" data-color="#000000"></div>
  <div class="color" style="background:#ffffff" data-color="#ffffff"></div>
</div>

<script>

var map = L.map('map', {
  worldCopyJump: false,
  maxBounds: [[-90, -180], [90, 180]]
}).setView([20, 0], 2);

L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors',
  noWrap: true
}).addTo(map);

var selectedColor = "#ff0000";

document.querySelectorAll(".color").forEach(btn => {
  btn.addEventListener("click", function() {
    selectedColor = this.dataset.color;
  });
});

/* ðŸ”¥ Sabit harita pixel boyutu */
var pixelSize = 1; // derece bazlÄ± sabit

map.on('click', function(e) {

  var lat = Math.floor(e.latlng.lat / pixelSize) * pixelSize;
  var lng = Math.floor(e.latlng.lng / pixelSize) * pixelSize;

  L.rectangle([
    [lat, lng],
    [lat + pixelSize, lng + pixelSize]
  ], {
    color: selectedColor,
    fillColor: selectedColor,
    fillOpacity: 1,
    weight: 0
  }).addTo(map);

});

</script>

</body>
</html>
